/* === APP SHELL === */
#app{min-height:100vh;min-height:100dvh;display:flex;flex-direction:column;max-width:100vw;overflow-x:hidden}

/* === HEADER - top bar === */
.header{position:sticky;top:0;z-index:100;background:var(--bg-header);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-bottom:1px solid var(--border);transition:background .35s}
.nav{display:flex;align-items:center;padding:0 12px;height:48px;gap:0}
.logo{display:flex;align-items:center;gap:6px;flex-shrink:0;color:var(--text)}
.logo svg{width:34px;height:22px}
.logo-title{font-size:.82rem;font-weight:400;color:var(--text-secondary);white-space:nowrap}
.nav-spacer{flex:1}
.nav-center{position:absolute;left:50%;transform:translateX(-50%);font-size:.92rem;font-weight:600;color:var(--text);white-space:nowrap;pointer-events:none;letter-spacing:.02em}

/* === BOTTOM TAB BAR === */
.tab-bar{position:fixed;bottom:0;left:0;right:0;z-index:190;background:var(--bg-header);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-top:1px solid var(--border);padding-bottom:var(--safe-bottom);display:flex;justify-content:space-around;align-items:flex-end;height:calc(64px + var(--safe-bottom));transition:transform .3s}
.tab-bar.hide{transform:translateY(100%)}
.tab{background:none;border:none;padding:8px 0 6px;font-family:var(--font-zh);font-size:.7rem;font-weight:400;color:var(--text-muted);cursor:pointer;position:relative;transition:color .2s;white-space:nowrap;flex:1;display:flex;flex-direction:column;align-items:center;gap:3px;min-width:0}
.tab-icon{width:24px;height:24px;stroke:currentColor;fill:none;stroke-width:1.6;stroke-linecap:round;stroke-linejoin:round}
.tab.active{color:var(--accent);font-weight:500}
.tab.active .tab-icon{stroke-width:2}
.tab-sub{display:none}

/* === CENTER PLAY BUTTON in tab bar === */
.tab-center{flex:1;display:flex;align-items:center;justify-content:center;padding:0 0 6px;position:relative}
.center-play-btn{position:relative;width:48px;height:48px;margin-top:-18px;border:none;background:var(--accent);border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 16px rgba(131,106,50,0.3);transition:transform .15s,box-shadow .15s;z-index:2;-webkit-appearance:none;appearance:none}
.center-play-btn:active{transform:scale(0.94)}
.center-play-btn svg.center-play-icon{width:22px;height:22px;fill:var(--text-inverse);stroke:none;position:relative;z-index:2}
.center-play-btn .progress-ring{position:absolute;inset:-4px;width:56px;height:56px;z-index:1;transform:rotate(-90deg)}
.center-play-btn .progress-ring-bg{fill:none;stroke:var(--border);stroke-width:3}
.center-play-btn .progress-ring-fill{fill:none;stroke:var(--accent);stroke-width:3;stroke-linecap:round;stroke-dasharray:157;stroke-dashoffset:157;transition:stroke-dashoffset .15s linear}
.center-play-btn.playing{animation:centerSpin 8s linear infinite}
@keyframes centerSpin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
.center-play-btn.playing .progress-ring{animation:centerSpinReverse 8s linear infinite}
@keyframes centerSpinReverse{from{transform:rotate(-90deg)}to{transform:rotate(calc(-90deg - 360deg))}}

/* Icon buttons */
.nav-actions{display:flex;align-items:center;gap:0;flex-shrink:0}
.btn-icon{-webkit-appearance:none;appearance:none;background:none;border:none;border-radius:50%;width:36px;height:36px;min-width:36px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;color:var(--text-muted);transition:all .2s;padding:0}
.btn-icon:hover,.btn-icon:active{color:var(--text)}
.btn-icon.active{color:var(--accent)}
.btn-icon svg{width:17px;height:17px;stroke:currentColor;fill:none;stroke-width:1.8;stroke-linecap:round;stroke-linejoin:round}

/* Search */
.search-row{padding:6px 12px 4px;display:none}
.search-row.show{display:block}
.search-field{width:100%;padding:9px 14px 9px 36px;border:1px solid var(--border);border-radius:var(--radius-sm);background:var(--bg-card);font-family:var(--font-zh);font-size:.86rem;color:var(--text);outline:none;transition:border-color .2s}
.search-field:focus{border-color:var(--border-active)}
.search-field::placeholder{color:var(--text-muted)}
.search-box{position:relative}
.search-box svg{position:absolute;left:11px;top:50%;transform:translateY(-50%);width:15px;height:15px;stroke:var(--text-muted);fill:none;stroke-width:1.8;pointer-events:none}

/* === CONTENT === */
.content{flex:1;padding:14px 16px calc(64px + var(--safe-bottom) + 14px);overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch}
.content.has-player{padding-bottom:calc(64px + var(--safe-bottom) + 14px)}

.view{display:none;animation:viewIn .3s ease-out}
.view.active{display:block}
@keyframes viewIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}

@media(min-width:500px){
  .series-list{display:grid;grid-template-columns:1fr 1fr;gap:10px}
}
@media(min-width:768px){
  .series-list{grid-template-columns:1fr 1fr 1fr}
  .content{max-width:900px;margin:0 auto;padding-left:24px;padding-right:24px}
  .nav{max-width:900px;margin-left:auto;margin-right:auto}
  .tab-bar{max-width:420px;left:50%;transform:translateX(-50%);border-radius:16px 16px 0 0;border-left:1px solid var(--border);border-right:1px solid var(--border)}
}

.sr-only{position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap}
